<!DOCTYPE html>
<html>
  <head>
    <title>BuyThisWine</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
    <script src="https://js.stripe.com/v3"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  </head>

  <body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <ul class="navbar-nav">
      <li class="nav-item nav-link"><%= link_to 'Wines', root_path %></li>
      <li class="nav-item nav-link"><%= link_to 'Varieties', varieties_path %></li>
      <li class="nav-item nav-link"><%= link_to 'Wineries', wineries_path %></li>
      <li class="nav-item nav-link"><%= link_to 'Regions', regions_path %></li>
      <li>
        <%= form_with(url: search_wines_path, method: :get, local: true) do  |f|%>
          <%= f.collection_select( :variety_id, Variety.all.order(:name),:id,:name, {:include_blank => 'All Varieties',:selected => yield(:searched_variety_id)}) %>
          <%= text_field_tag(:keywords, yield(:searched_keywords) , class: "input",  placeholder: "Search for wines") %>
          <%= submit_tag("Search", class: "btn btn-primary") %>
        <% end %>
      </li>
      <li>
          <%= image_tag("cart.png", width:35) %>
        </li>
      <% if customer_signed_in? %>
        <li>
          <%= link_to "Sign Out", destroy_customer_session_path, :method => :delete, class: "btn btn-danger" %>
        </li>
      <% else %>
        <li>
          <%= link_to "Sign In", customer_session_path, :method => :post, class: "btn btn-success" %>
        </li>
      <% end %>
    </ul>
  </nav>
    <%= yield %>
  </body>
</html>
